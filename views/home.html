{% extends 'base.html' %}

{% block main %}
<div class="jumbotron">
    {% if user is not empty %}
        <div class="form-group">
            <button type="button" class="btn btn-success pull-right disabled" id="refresh">
                <i class="fa fa-1x fa-spinner"></i> Refresh
            </button>
        </div>

        <br>

        <div class="form-group">
            <label for="channel"><i class="fa fa-1x fa-list"></i> Channel:</label>
            <select class="form-control" id="channel">
                <option selected="" value="">Select channel</option>
            </select>
        </div>

        <div class="form-group">
            <label for="user"><i class="fa fa-1x fa-search"></i> User ID:</label>
            <input type="text" class="form-control" id="user" />
        </div>

        <div class="form-group">
            <label for="limit"><i class="fa fa-sort-numeric-asc fa-1x"></i> Maximum number of messages:</label>
            <input type="number" class="form-control" step="1" min="1" value="25" id="limit">
        </div>

        <div class="form-group">
            <label for="offset"><i class="fa fa-sort-numeric-desc fa-1x"></i> Amount of messages to offset by:</label>
            <input type="number" class="form-control" step="1" min="0" value="0" id="offset">
        </div>

        <div class="alert alert-danger hidden" id="error"></div>

        <div class="hidden alert alert-success"><i class="fa fa-comments-o fa-1x"></i> Retrieved <strong id="count"></strong> messages</div>
        <table id="messages" class="table table-bordered hidden">
            <thead>
                <tr>
                    <th>Date &amp; time:</th>
                    <th>Channel:</th>
                    <th>Display name:</th>
                    <th>Message:</th>
                </tr>
            </thead>

            <tbody></tbody>
        </table>
    {% else %}
        <p class="text-info">Please <a href="/auth/discord">log in with Discord</a>.</p>
    {% endif %}
</div>
{% endblock %}

{% block scripts %}
    {% if user is not empty %}
        <script type="text/javascript" src="/static/js/messages.js"></script>
    {% endif %}
{% endblock %}
